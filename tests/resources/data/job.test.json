{
  "title": "Test. Using test datasource uniserv-rtc-de",
  "type": "ModelTestJob",
  "spec": {
    "model": {
      "name": "test-actions-pipeline-rtc-model",
      "description": "Model for test actions launched by pipelines",
      "metadata": {
        "namespace": "recognai",
        "owner": "frascuchon",
        "type": "Model",
        "resourceVersion": "d1a9bf8f-d2ef-4466-accb-882d53b31832",
        "createdBy": "frascuchon",
        "createdAt": "2018-07-02T23:16:20.016+02:00",
        "lastUpdateAt": "2018-07-02T23:16:20.016+02:00",
        "labels": {
        }
      }
    },
    "modelRevision": {
      "id": "62fe6e4453c199f97b4252cabf1b125cf8613b22",
      "name": "record-type-classification-gru-de",
      "description": "Record type classifier for Germany with a character GRU encoder",
      "version": "v0.0.1",
      "definition": {
        "input": {
          "$schema": "http://json-schema.org/draft-04/schema#",
          "required": [
            "tokens"
          ],
          "properties": {
            "tokens": {
              "type": "array",
              "items": "string"
            },
            "gold_label": {
              "type": "string"
            }
          }
        },
        "annotation": {
          "$schema": "http://json-schema.org/draft-04/schema#",
          "type": "object",
          "required": [
            "logits",
            "class_probabilities",
            "loss",
            "max_label",
            "probabilities_by_class"
          ],
          "properties": {
            "max_label": {
              "type": "string"
            },
            "class_probabilities": {
              "type": "array",
              "items": {
                "type": "number"
              }
            },
            "logits": {
              "type": "array",
              "items": {
                "type": "number"
              }
            },
            "loss": {
              "type": "number"
            },
            "probabilities_by_class": {
              "type": "array",
              "items": {
                "type": "object",
                "required": [
                  "class",
                  "probability"
                ],
                "properties": {
                  "class": {
                    "type": "string"
                  },
                  "probability": {
                    "type": "number"
                  }
                }
              }
            }
          }
        },
        "topology": {
          "pipeline": {
            "target": "gold_label",
            "token_indexers": {
              "token_characters": {
                "type": "characters",
                "character_tokenizer": {
                  "byte_encoding": "utf-8"
                }
              }
            }
          },
          "architecture": {
            "type": "sequence_classifier",
            "text_field_embedder": {
              "token_characters": {
                "type": "character_encoding",
                "embedding": {
                  "num_embeddings": 260,
                  "embedding_dim": 8
                },
                "encoder": {
                  "hidden_size": 16,
                  "num_layers": 3,
                  "bidirectional": true,
                  "input_size": 8,
                  "type": "gru"
                }
              }
            },
            "encoder": {
              "type": "gru",
              "input_size": 32,
              "bidirectional": true,
              "hidden_size": 16
            }
          }
        }
      }
    },
    "ecosystem": {
      "id": "test-action-launch-ecosystem",
      "name": "test action launch ecosystem",
      "modelRefs": [
        "test-actions-pipeline-rtc-model"
      ],
      "datasourceRefs": [
        {
          "ref": "dede",
          "settings": {
            "role": {
              "testSplit": 100
            },
            "modelConnect": {
              "record": [
                "reviewText"
              ],
              "gold_label": "overall"
            }
          }
        },
        {
          "ref": "uniserv-rtc-de",
          "settings": {
            "role": {
              "trainSplit": 0,
              "testSplit": 100
            }
          }
        }
      ],
      "metadata": {
        "namespace": "recognai",
        "owner": "frascuchon",
        "type": "Ecosystem",
        "resourceVersion": "3cb1f8c4-0c9a-4f35-98c7-1e67492e72e5",
        "createdBy": "frascuchon",
        "createdAt": "2018-07-02T21:12:03.565Z",
        "lastUpdateAt": "2018-07-02T21:12:03.565Z",
        "labels": {
        }
      }
    },
    "test": {
      "datasource": {
        "id": "test-csv-uniserv-rtc",
        "name": "test-csv-uniserv-rtc",
        "type": "FileSystem",
        "params": {
          "recogn.ai/files": [
            "s3://recognai-dev.recogn.ai/recognai/test-csv-uniserv-rtc/de_rtc_test_small_15.csv"
          ],
          "recogn.ai/location": "s3://recognai-dev.recogn.ai/recognai/test-csv-uniserv-rtc"
        },
        "format": {
          "type": "csv",
          "charset": "UTF-8",
          "params": {
            "charToEscapeQuoteEscaping": "\u0000",
            "quote": "\"",
            "quoteEscape": "\"",
            "lineSeparator": "\n",
            "delimiter": ","
          }
        },
        "schema": [
          {
            "key": "label",
            "value": {
              "type": "string",
              "position": 0
            }
          },
          {
            "key": "category of dataset",
            "value": {
              "type": "string",
              "position": 1
            }
          },
          {
            "key": "Subclassification",
            "value": {
              "type": "string",
              "position": 2
            }
          }
        ],
        "defaultRole": {
          "trainSplit": 0,
          "validationSplit": 0,
          "testSplit": 100
        },
        "state": "READY",
        "metadata": {
          "namespace": "recognai",
          "owner": "frascuchon",
          "type": "DataSource",
          "resourceVersion": "fa194033-b56b-4c73-8012-ddddc2fccb6a",
          "createdBy": "frascuchon",
          "createdAt": "2018-07-02T21:10:43.743Z",
          "lastUpdateAt": "2018-07-02T21:10:43.743Z",
          "labels": {
          }
        }
      },
      "settings": {
        "role": {
          "trainSplit": 0,
          "validationSplit": 0,
          "testSplit": 100
        },
        "modelConnect": {
          "tokens": [
            "label"
          ],
          "target": {
            "gold_label": "category of dataset"
          }
        }
      }
    }
  },
  "metadata": {
    "namespace": "recognai",
    "owner": "frascuchon",
    "type": "Job",
    "resourceVersion": "fbe8a29e-72e3-4204-ae25-425ebe886996",
    "createdBy": "frascuchon",
    "createdAt": "2018-07-02T23:16:20.016+02:00",
    "lastUpdateAt": "2018-07-02T23:16:20.016+02:00",
    "labels": {
    }
  }
}