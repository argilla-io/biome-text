{
  "title": "Learn. Using training datasource German Wikidata RTC training set",
  "type": "ModelLearnJob",
  "spec": {
    "model": {
      "name": "test-actions-pipeline-rtc-model",
      "description": "Model for test actions launched by pipelines",
      "metadata": {
        "namespace": "recognai",
        "owner": "frascuchon",
        "type": "Model",
        "resourceVersion": "c8272bd1-7ad7-4764-b758-5a6ad159011c",
        "createdBy": "frascuchon",
        "createdAt": "2018-07-03T01:40:15.325+02:00",
        "lastUpdateAt": "2018-07-03T01:40:15.326+02:00",
        "labels": {}
      }
    },
    "modelRevision": {
      "id": "62fe6e4453c199f97b4252cabf1b125cf8613b22",
      "name": "record-type-classification-gru-de",
      "description": "Record type classifier for Germany with a character GRU encoder",
      "version": "v0.0.1",
      "definition": {
        "input": {
          "": "http://json-schema.org/draft-04/schema#",
          "required": [
            "tokens"
          ],
          "properties": {
            "tokens": {
              "type": "array",
              "items": "string"
            },
            "gold_label": {
              "type": "string"
            }
          }
        },
        "annotation": {
          "": "http://json-schema.org/draft-04/schema#",
          "type": "object",
          "required": [
            "logits",
            "class_probabilities",
            "loss",
            "max_label",
            "probabilities_by_class"
          ],
          "properties": {
            "max_label": {
              "type": "string"
            },
            "class_probabilities": {
              "type": "array",
              "items": {
                "type": "number"
              }
            },
            "logits": {
              "type": "array",
              "items": {
                "type": "number"
              }
            },
            "loss": {
              "type": "number"
            },
            "probabilities_by_class": {
              "type": "array",
              "items": {
                "type": "object",
                "required": [
                  "class",
                  "probability"
                ],
                "properties": {
                  "class": {
                    "type": "string"
                  },
                  "probability": {
                    "type": "number"
                  }
                }
              }
            }
          }
        },
        "topology": {
          "pipeline": {
            "target": "gold_label",
            "token_indexers": {
              "token_characters": {
                "type": "characters",
                "character_tokenizer": {
                  "byte_encoding": "utf-8"
                }
              }
            }
          },
          "architecture": {
            "type": "sequence_classifier",
            "text_field_embedder": {
              "token_characters": {
                "type": "character_encoding",
                "embedding": {
                  "num_embeddings": 260,
                  "embedding_dim": 8
                },
                "encoder": {
                  "hidden_size": 16,
                  "num_layers": 3,
                  "bidirectional": true,
                  "input_size": 8,
                  "type": "gru"
                }
              }
            },
            "encoder": {
              "type": "gru",
              "input_size": 32,
              "bidirectional": true,
              "hidden_size": 16
            }
          }
        }
      }
    },
    "ecosystem": {
      "id": "test-action-launch-ecosystem",
      "name": "test action launch ecosystem",
      "modelRefs": [
        "test-actions-pipeline-rtc-model"
      ],
      "datasourceRefs": [
        {
          "ref": "dede",
          "settings": {
            "role": {
              "testSplit": 100
            },
            "modelConnect": {
              "record": [
                "reviewText"
              ],
              "gold_label": "overall"
            }
          }
        },
        {
          "ref": "uniserv-rtc-de",
          "settings": {
            "role": {
              "trainSplit": 0,
              "testSplit": 100
            }
          }
        },
        {
          "ref": "test-csv-uniserv-rtc",
          "settings": {
            "role": {
              "trainSplit": 0,
              "testSplit": 100
            }
          }
        }
      ],
      "metadata": {
        "namespace": "recognai",
        "owner": "frascuchon",
        "type": "Ecosystem",
        "resourceVersion": "a967208f-6fcf-4a97-866e-6ec18dd4850a",
        "createdBy": "frascuchon",
        "createdAt": "2018-07-02T21:35:10.869Z",
        "lastUpdateAt": "2018-07-02T21:35:10.869Z",
        "labels": {}
      }
    },
    "train": {
      "datasource": {
        "id": "german-wikidata-rtc-training-set",
        "name": "German Wikidata RTC training set",
        "type": "FileSystem",
        "params": {
          "recogn.ai/files": [
            "s3://recognai-dev.recogn.ai/recognai/german-wikidata-rtc-training-set/wikidata-german-things-shuffled.json"
          ],
          "recogn.ai/location": "s3://recognai-dev.recogn.ai/recognai/german-wikidata-rtc-training-set"
        },
        "format": {
          "type": "json-l",
          "charset": "UTF-8",
          "params": {}
        },
        "schema": [
          {
            "key": "type",
            "value": ""
          },
          {
            "key": "id",
            "value": ""
          },
          {
            "key": "labels.de",
            "value": ""
          },
          {
            "key": "descriptions.de",
            "value": ""
          },
          {
            "key": "aliases",
            "value": ""
          },
          {
            "key": "claims.P625[0][0]",
            "value": ""
          },
          {
            "key": "claims.P625[0][1]",
            "value": ""
          },
          {
            "key": "claims.P17[0]",
            "value": ""
          },
          {
            "key": "claims.P131[0]",
            "value": ""
          },
          {
            "key": "claims.P31[0]",
            "value": ""
          },
          {
            "key": "claims.P31[1]",
            "value": ""
          },
          {
            "key": "claims.P18[0]",
            "value": ""
          },
          {
            "key": "sitelinks.dewiki",
            "value": ""
          }
        ],
        "defaultRole": {
          "trainSplit": 100,
          "validationSplit": 0,
          "testSplit": 0
        },
        "state": "READY",
        "metadata": {
          "namespace": "recognai",
          "owner": "dvilasuero",
          "type": "DataSource",
          "resourceVersion": "bd7fe13c-db4c-480d-9352-e94125e58223",
          "createdBy": "dvilasuero",
          "createdAt": "2018-07-03T10:05:14.125Z",
          "lastUpdateAt": "2018-07-03T10:05:14.125Z",
          "labels": {}
        }
      },
      "settings": {
        "modelConnect": {
          "tokens": [
            "labels.de"
          ],
          "target": {
            "gold_label": "type"
          }
        }
      }
    },
    "validation": {
      "datasource": {
        "id": "german-uniserv-rtc-test",
        "name": "German uniserv rtc test",
        "type": "FileSystem",
        "params": {
          "recogn.ai/files": [
            "s3://recognai-dev.recogn.ai/recognai/german-uniserv-rtc-test/de_rtc_test_small_15.csv"
          ],
          "recogn.ai/location": "s3://recognai-dev.recogn.ai/recognai/german-uniserv-rtc-test"
        },
        "format": {
          "type": "csv",
          "charset": "UTF-8",
          "params": {
            "charToEscapeQuoteEscaping": "\u0000",
            "quote": "\"",
            "quoteEscape": "\"",
            "lineSeparator": "\n",
            "delimiter": ","
          }
        },
        "schema": [
          {
            "key": "label",
            "value": {
              "type": "string",
              "position": 0
            }
          },
          {
            "key": "Branche",
            "value": {
              "type": "string",
              "position": 1
            }
          },
          {
            "key": "category of dataset",
            "value": {
              "type": "string",
              "position": 2
            }
          },
          {
            "key": "Type Info",
            "value": {
              "type": "string",
              "position": 3
            }
          }
        ],
        "defaultRole": {
          "trainSplit": 0,
          "validationSplit": 0,
          "testSplit": 100
        },
        "state": "READY",
        "metadata": {
          "namespace": "recognai",
          "owner": "frascuchon",
          "type": "DataSource",
          "resourceVersion": "1c275cf9-9d1c-4220-befa-7d4d716072ce",
          "createdBy": "frascuchon",
          "createdAt": "2018-07-03T10:44:56.531Z",
          "lastUpdateAt": "2018-07-03T10:44:56.531Z",
          "labels": {}
        }
      },
      "settings": {
        "role": {
          "trainSplit": 0,
          "validationSplit": 0,
          "testSplit": 100
        },
        "modelConnect": {
          "tokens": [
            "label"
          ],
          "target": {
            "gold_label": "category of dataset"
          }
        }
      }
    },
    "test": {
      "datasource": {
        "id": "german-uniserv-rtc-test",
        "name": "German uniserv rtc test",
        "type": "FileSystem",
        "params": {
          "recogn.ai/files": [
            "s3://recognai-dev.recogn.ai/recognai/german-uniserv-rtc-test/de_rtc_test_small_15.csv"
          ],
          "recogn.ai/location": "s3://recognai-dev.recogn.ai/recognai/german-uniserv-rtc-test"
        },
        "format": {
          "type": "csv",
          "charset": "UTF-8",
          "params": {
            "charToEscapeQuoteEscaping": "\u0000",
            "quote": "\"",
            "quoteEscape": "\"",
            "lineSeparator": "\n",
            "delimiter": ","
          }
        },
        "schema": [
          {
            "key": "label",
            "value": {
              "type": "string",
              "position": 0
            }
          },
          {
            "key": "Branche",
            "value": {
              "type": "string",
              "position": 1
            }
          },
          {
            "key": "category of dataset",
            "value": {
              "type": "string",
              "position": 2
            }
          },
          {
            "key": "Type Info",
            "value": {
              "type": "string",
              "position": 3
            }
          }
        ],
        "defaultRole": {
          "trainSplit": 0,
          "validationSplit": 0,
          "testSplit": 100
        },
        "state": "READY",
        "metadata": {
          "namespace": "recognai",
          "owner": "frascuchon",
          "type": "DataSource",
          "resourceVersion": "1c275cf9-9d1c-4220-befa-7d4d716072ce",
          "createdBy": "frascuchon",
          "createdAt": "2018-07-03T10:44:56.531Z",
          "lastUpdateAt": "2018-07-03T10:44:56.531Z",
          "labels": {}
        }
      },
      "settings": {
        "role": {
          "trainSplit": 0,
          "validationSplit": 0,
          "testSplit": 100
        },
        "modelConnect": {
          "tokens": [
            "label"
          ],
          "target": {
            "gold_label": "category of dataset"
          }
        }
      }
    }
  },
  "metadata": {
    "namespace": "recognai",
    "owner": "frascuchon",
    "type": "Job",
    "resourceVersion": "e3941b0a-1054-42ee-8f1d-57e27c3f6d08",
    "createdBy": "frascuchon",
    "createdAt": "2018-07-04T08:39:18.638Z",
    "lastUpdateAt": "2018-07-04T08:39:18.638Z",
    "labels": {}
  }
}